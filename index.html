<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tropical Topical Trivia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Open+Sans+Condensed:300" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="header">
        <div class="row">
            <h1>Tropical Topical Trivia</h1>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <h2>Time Remaining: </h2>
        </div>
    </div>

    <a class="btn waves-effect waves-light finishQuiz" type="submit" name="action">Finish
    </a>

    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
    <!-- <script src="assets/javascript/app.js"></script> -->
    <script>
        let questions = [
            {
                id: 0,
                question: 'This very popular resort city is located in the Mexican state of Quintana Roo, on what is known as the the Mayan Riviera.',
                choices: ['Ixtapa', 'Acapulco', 'Cancun', 'Puerto Vallarta'],
                correct: 'Cancun',
            },
            {
                id: 1,
                question: 'Which of the following geographical areas does not have a Rainforest?',
                choices: ['Africa', 'Central America', 'North America', 'Southern Asia'],
                correct: 'North America',
            },
            {
                id: 2,
                question: 'In which rainforest layer will you find a sloth?',
                choices: ['Forest Floor', 'Understory', 'Canopy', 'Emergent'],
                correct: 'Canopy',
            },
            {
                id: 3,
                question: 'What makes a spider monkey unique from other monkeys?',
                choices: ['It has only 4 fingers and no thumb', 'It likes to eat spiders', 'It likes to hang upside-down like a spider', 'It uses its tail as an extra limb'],
                correct: 'It has only 4 fingers and no thumb',
            },
            {
                id: 4,
                question: 'Orchids share a common pattern of how many petals?',
                choices: ['1', '2', '3', '4'],
                correct: '3',
            },
            {
                id: 5,
                question: 'Bamboo, bananas, sugar cane, rubber, ginger, vanilla, and black pepper are not found in the tropical rainforest. True or False?',
                choices: ['True', 'False'],
                correct: 'True',
            },
            {
                id: 6,
                question: 'This island nation was a playground for movie stars and mob types, until its famous Revolution in 1959. It sits in the middle of Hurricane Alley, 90 miles off the coast of Florida.',
                choices: ['Cuba', 'Bermuda', 'Cozumel', 'Haiti'],
                correct: 'Cuba',
            }
        ]

        questions.forEach(question => {
            $('.container').append(`
            <div class="row">
                <h5 class="question">${question.question}</h5>
                <p>
                    <label>
                        <input class="choice" data-choice="${question.choices[0]}"  name="question-${question.id}" type="radio"/>
                        <span>${question.choices[0]}</span>
                        </label>
                        </p>
                 <p>
                    <label>
                        <input class="choice" data-choice="${question.choices[1]}" name="question-${question.id}" type="radio"/>
                        <span>${question.choices[1]}</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input class="choice" data-choice="${question.choices[2]}" name="question-${question.id}" type="radio"/>
                        <span>${question.choices[2]}</span>
                        </label>
                </p>
                <p>
                    <label>
                        <input class="choice" data-choice="${question.choices[3]}" name="question-${question.id}" type="radio"/>
                        <span>${question.choices[3]}</span>
                    </label>
                </p>
                <p class="answer-${question.id}" style="display: none">${question.correct}</p>
            </div>
        `)
        })

        var qChoice0
        var qChoice1
        var qChoice2
        var qChoice3
        var qChoice4
        var qChoice5

        $(document).on('click', '.choice', function () {
            let temp = $(this).attr('name').split('-')
            let qId = temp[1]
            window[`qChoice${qId}`] = $(this).attr('data-choice')
        })

        $('.finishQuiz').on('click', function () {
            count = 0
            for (let i = 0; i < questions.length; i++) {
                $('.answer-${i}').css('visibility', 'visible')
            if (window[`qChoice${i}`] === questions[i].correct) {
                count++
                }
            }
            if (count === 6) {
                alert('You win!')
            } else {
                alert('Try again!')
            }
        })

    </script>
</body>
</html>